formatVersion: 1
inputs:
  flavorSize:
    type: string
    default: medium
    enum:
      - small
      - medium
      - large
  image:
    type: string
    default: ubuntu24
    enum:
      - ubuntu24
      - ubuntu22
resources:
  ubuntuVM:
    type: Cloud.Machine
    properties:
      constraints:
        - tag: "!vcfaCapablity:closed:hard"
        - tag: "application:${infra_tag}"
      image: \${input.image}
      flavor: \${input.flavorSize}
      networks:
        - network: ${resource.Cloud_Network_1.id}
      storage:
        constraints:
          - tag: storageTier:iscsi
  ubuntuVM-network:
    type: Cloud.Network
    properties:
      networkType: existing
      constraints:
        - tag: "application:${infra_tag}"
